#:schema https://docs.jj-vcs.dev/latest/config-schema.json

[user]
name = "ray"
email = "kjwsl@fatherslab.com"

[ui]
diff-formatter = "difft"
editor = "nvim"
diff-editor = ["nvim", "-c", "DiffviewOpen"]

# Make logs readable for humans, not graph theorists
log-format = "builtin"
default-command = "log"

[diff]
tool.difftastic.command = ["difft", "--color=always"]
tool.delta.command = ["delta", "--paging=always"]

[git]
# Keep Git in the loop without surprises
push-branch-prefix = "jj/"
auto-local-branch = true

[revsets]
# What jj shows by default (recent, relevant stuff)
log = "ancestors(@, 50) | descendants(@, 10)"

[templates]
# Cleaner commit summaries
commit_summary = '''
"{description}"
'''

# This puts the diff at the bottom of your message when you run 'jj describe'
draft_commit_description = '''
concat(
  description,
  surround(
    "\nJJ: Changes:\n",
    "",
    indent("JJ: ", diff.stat(72)),
  ),
  surround("\nJJ: Diff:\n", "", indent("JJ: ", diff.git(4)))
)
'''

[aliases]
# Status & inspection
lg = ["log", "-r", "ancestors(@, 20)"]
df = ["diff"]
dfh = ["diff", "-r", "@"]      # diff current commit vs working copy
dfp = ["diff", "-r", "@-"]     # diff parent commit

# Navigation
co = ["checkout"]
sw = ["checkout"]

# Commit ergonomics
cm = ["commit"]
am = ["amend"]
sp = ["split"]
